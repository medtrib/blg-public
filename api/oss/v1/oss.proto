// Code generated by entproto. DO NOT EDIT.
syntax = "proto3";

package file.v1;


import "google/protobuf/empty.proto";

import "google/api/annotations.proto";

import "validate/validate.proto";

import "openapiv3/annotations.proto";

option go_package = "github.com/medtrib/kbk-oss/api/oss/v1";

option (openapi.v3.document) = {
    info: {
        title: "文件服务",
        version: "0.0.1",
        contact: {
            name: "your name",
            url: "",
            email: ""
        },
        description: "文件服务";
    },
};

// 文件服务
service OSS {
    // 获取ossToken
    rpc GetOssStsToken (google.protobuf.Empty) returns (OssStsTokenResponse){
        option (google.api.http) = { 
            get:"/oss/sts/token"  
        };
    };
    // 文件上传
    rpc UploadFile (UploadFileRequest) returns (UploadFileResponse){
        option (google.api.http) = { 
            post:"/file/upload"  
            body: "*"
        };
    };
}

// 响应 - OSS前端直传信息
message OssStsTokenResponse {
    // access_key
    string access_key = 1;
    // access_secret
	string access_secret = 2;
    // 过期时间
	string expiration = 3;
    // 安全令牌
	string security_token = 4;
    // 终端
	string end_point = 5;
    // 存储桶
	string bucket_name = 6;
	// 区域
    string region = 7;
    // url
	string url = 8;
}

// 请求 - 文件上传
message UploadFileRequest {
	string file_name = 1[(validate.rules).string = {min_len: 1, max_len: 255}];
	string file_type = 2[(validate.rules).string = {in: ["jpg", "png", "jpeg"]}];
	bytes content = 3[(validate.rules).bytes.min_len = 1];
}

// 响应 - 文件上传url
message UploadFileResponse {
	string url = 1;
}
